<!DOCTYPE HTML>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Material Lite -->
    <!-- https://getmdl.io/started/index.html -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!--<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">-->
    <link rel="stylesheet" href="material.min.css">
    <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  </head>

  <body>

    <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <header class="mdl-layout__header">
        <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">Esign Response Page</span>
        </div>
      </header>
    <main class="mdl-layout__content">

    <div align="center">
      <br><br>
      <div id="main" width="90%">

        <br /><br />
        <a href="https://HTML2IMM.sbatester.repl.co">Start Over</a><br />
        <a href="https://integrations.immesign.com/v2019.2/TeAASP" target="_blank">Visit IMM Site</a><br /><br />

        <form method="POST">
          <table border="1">
            <tr>
              <td><span>RequestType</span></td>
              <td><input type="text" id="reqtype" name="reqtype" size="25" value="" disabled/></td>
            </tr>
            <tr>
              <td><span>AccessToken</span></td>
              <td><input type="text" id="acctok" name="acctok" size="25" value="" /></td>
            </tr>
            <tr>
              <td><span>HostSessionId</span></td>
              <td><input type="text" id="sessid" name="sessid" size="25" value="" /></td>
            </tr>
          </table>
          <br /><br />
          
          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary"
            id="myBtn" 
            formaction="/getremotesession">
            Get Remote Session
          </button>
        
          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary"
            id="myBtn2" 
            formaction="/getsession">
            Get Session
          </button>

          <button
            class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--primary"
            id="myBtn3" 
            formaction="/getdocreport">
            Document Report
          </button>

        </form>
<br /><br />
<span>The Session buttons merely return raw JSON. A good Chrome plugin to better view is <a href="https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc?hl=en" target="_blank">JSONView</a>
      </div>
    </div>
  </main>
</div>


<script>
  const queryString = window.location.search;
  console.log(queryString);
  const urlParams = new URLSearchParams(queryString);
  const reqtype = urlParams.get('reqtype')
  console.log(reqtype);
  const acctok = urlParams.get('acctok')
  console.log(acctok);
  const sessid = urlParams.get('sessid')
  console.log(sessid);
  document.getElementById('reqtype').value = reqtype;
  document.getElementById('acctok').value = acctok;
  document.getElementById('sessid').value = sessid;

  //hide remote button
  var requesttype = document.getElementById("reqtype");
  var remoteBtnDiv = document.getElementById("remoteBtnDiv");
  if (requesttype.value == "direct") {
    document.getElementById("myBtn").disabled = true;
  }
</script>

  </body>
</html>